import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as h}from"./index.TcFrwHGi.js";import{B as m}from"./Button.DG6KPLDP.js";import{A as p}from"./Alert.D-DBx2Lh.js";import{D as b}from"./Dialog.0K2iIL7s.js";import{c as u,a as y,f,b as g,s as o,d as j}from"./common.D6o9g8lX.js";function v({isOpen:t,onClose:s,onConfirm:r,title:a="UsuÅ„ trening",message:d="Czy na pewno chcesz usunÄ…Ä‡ ten trening? Tej operacji nie moÅ¼na cofnÄ…Ä‡."}){const[n,x]=h.useState(!1),l=async()=>{x(!0);try{await r()}finally{x(!1)}};return e.jsxs(b,{isOpen:t,onClose:s,title:a,children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm lg:text-base",children:d}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(m,{variant:"danger",onClick:l,isLoading:n,className:"flex-1",children:"UsuÅ„"}),e.jsx(m,{variant:"secondary",onClick:s,disabled:n,children:"Anuluj"})]})]})}function k(t){const s=u();let r=new Date(t.date).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long",year:"numeric"});t.time&&(r+=` â€¢ ${t.time}`);let a=y(s,t.trainingType?.name||"Trening",r);s.setFontSize(12),s.setTextColor(31,41,55);const d=[{label:"Czas trwania",value:f(t.durationMinutes)}];if(t.caloriesBurned&&d.push({label:"Spalone kalorie",value:`${t.caloriesBurned} kcal`}),g(s,{startY:a,head:[],body:d.map(l=>[o(l.label),o(l.value)]),theme:"plain",columnStyles:{0:{fontStyle:"bold",cellWidth:50},1:{cellWidth:"auto"}},styles:{fontSize:11,cellPadding:4},margin:{left:14}}),a=s.lastAutoTable.finalY+15,t.trainingGoal){s.setFontSize(12),s.setFont("times","bold"),s.setTextColor(37,99,235),s.text(o("Cel treningu (mentalny i fizyczny)"),14,a),s.setFont("times","normal"),s.setTextColor(31,41,55),s.setFontSize(11),a+=8;const l=s.internal.pageSize.getWidth(),i=s.splitTextToSize(o(t.trainingGoal),l-28);s.text(i,14,a),a+=i.length*5+10}s.setFontSize(13),s.setFont("times","bold"),s.setTextColor(31,41,55),s.text(o("Oceny (skala 1-5)"),14,a),a+=10;const n=[{label:"OgÃ³lne zadowolenie",value:t.ratingOverall}];if(t.ratingPhysical&&n.push({label:"Samopoczucie fizyczne",value:t.ratingPhysical}),t.ratingEnergy&&n.push({label:"Poziom energii",value:t.ratingEnergy}),t.ratingMotivation&&n.push({label:"Motywacja",value:t.ratingMotivation}),t.ratingDifficulty&&n.push({label:"TrudnoÅ›Ä‡ treningu",value:t.ratingDifficulty}),g(s,{startY:a,head:[],body:n.map(l=>[o(l.label),`${l.value} / 5 ${"*".repeat(l.value)}${"-".repeat(5-l.value)}`]),theme:"plain",columnStyles:{0:{fontStyle:"bold",cellWidth:60},1:{cellWidth:"auto"}},styles:{fontSize:11,cellPadding:3},margin:{left:14}}),a=s.lastAutoTable.finalY+15,t.mostSatisfiedWith||t.improveNextTime||t.howToImprove){s.setFontSize(13),s.setFont("times","bold"),s.setTextColor(31,41,55),s.text(o("Refleksja po treningu"),14,a),a+=10;const l=s.internal.pageSize.getWidth();if(t.mostSatisfiedWith){s.setFontSize(11),s.setFont("times","bold"),s.setTextColor(22,163,74),s.text(o("Z czego jestem najbardziej zadowolony?"),14,a),a+=6,s.setFont("times","normal"),s.setTextColor(31,41,55);const i=s.splitTextToSize(o(t.mostSatisfiedWith),l-28);s.text(i,14,a),a+=i.length*5+8}if(t.improveNextTime){s.setFontSize(11),s.setFont("times","bold"),s.setTextColor(217,119,6),s.text(o("Co nastepnym razem chce zrobic lepiej?"),14,a),a+=6,s.setFont("times","normal"),s.setTextColor(31,41,55);const i=s.splitTextToSize(o(t.improveNextTime),l-28);s.text(i,14,a),a+=i.length*5+8}if(t.howToImprove){s.setFontSize(11),s.setFont("times","bold"),s.setTextColor(147,51,234),s.text(o("Jak moge to zrobic?"),14,a),a+=6,s.setFont("times","normal"),s.setTextColor(31,41,55);const i=s.splitTextToSize(o(t.howToImprove),l-28);s.text(i,14,a),a+=i.length*5+10}}if(t.notes){s.setFontSize(12),s.setFont("times","bold"),s.setTextColor(31,41,55),s.text(o("Dodatkowe uwagi i komentarze"),14,a),s.setFont("times","normal"),s.setFontSize(11),a+=8;const l=s.internal.pageSize.getWidth(),i=s.splitTextToSize(o(t.notes),l-28);s.text(i,14,a)}j(s);const x=`trening_${t.date}.pdf`;s.save(x)}function z({training:t}){const[s,r]=h.useState(!1),a=async()=>{r(!0);try{k(t)}catch(d){console.error("Error exporting PDF:",d)}finally{r(!1)}};return e.jsxs(m,{variant:"secondary",size:"sm",onClick:a,isLoading:s,children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"PDF"]})}function w(t){const s=Math.floor(t/60),r=t%60;return s>0?r>0?`${s}h ${r}min`:`${s}h`:`${r} minut`}function N(t){return new Date(t).toLocaleDateString("pl-PL",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}function c({rating:t}){return e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((s,r)=>e.jsx("svg",{className:`w-5 h-5 lg:w-6 lg:h-6 ${r<t?"text-yellow-400 fill-yellow-400 dark:text-yellow-500 dark:fill-yellow-500":"text-gray-300 dark:text-gray-700"}`,viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},r)),e.jsxs("span",{className:"ml-2 text-sm lg:text-base text-gray-600 dark:text-gray-400",children:[t,"/5"]})]})}function E({training:t}){const[s,r]=h.useState(!1),[a,d]=h.useState(null),n=async()=>{try{if(!(await fetch(`/api/trainings/${t.id}`,{method:"DELETE"})).ok)throw new Error("Nie udaÅ‚o siÄ™ usunÄ…Ä‡ treningu");window.location.href="/trainings"}catch(x){d(x instanceof Error?x.message:"WystÄ…piÅ‚ bÅ‚Ä…d"),r(!1)}};return e.jsxs("div",{children:[a&&e.jsx(p,{variant:"error",className:"mb-6",children:a}),e.jsxs("div",{className:"bg-white dark:bg-[#161b22] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-gray-100",children:t.trainingType?.name||"Trening"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1 text-base lg:text-lg",children:[N(t.date),t.time&&` â€¢ ${t.time}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{training:t}),e.jsx("a",{href:`/trainings/${t.id}/edit`,children:e.jsxs(m,{variant:"secondary",size:"sm",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edytuj"]})}),e.jsxs(m,{variant:"danger",size:"sm",onClick:()=>r(!0),children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"UsuÅ„"]})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm lg:text-base text-gray-500 dark:text-gray-400 mb-1",children:"Czas trwania"}),e.jsx("p",{className:"text-xl lg:text-2xl font-semibold text-gray-900 dark:text-gray-100",children:w(t.durationMinutes)})]}),t.caloriesBurned&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm lg:text-base text-gray-500 dark:text-gray-400 mb-1",children:"Spalone kalorie"}),e.jsxs("p",{className:"text-xl lg:text-2xl font-semibold text-gray-900 dark:text-gray-100",children:[t.caloriesBurned," kcal"]})]})]}),t.trainingGoal&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm lg:text-base font-medium text-blue-900 dark:text-blue-300 mb-2",children:"ðŸŽ¯ Cel treningu (mentalny i fizyczny)"}),e.jsx("p",{className:"text-sm lg:text-base text-blue-800 dark:text-blue-200 whitespace-pre-wrap",children:t.trainingGoal})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"font-semibold text-base lg:text-lg text-gray-900 dark:text-gray-100 mb-4",children:"Oceny"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm lg:text-base text-gray-600 dark:text-gray-400 mb-2",children:"OgÃ³lne zadowolenie"}),e.jsx(c,{rating:t.ratingOverall})]}),t.ratingPhysical&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm lg:text-base text-gray-600 dark:text-gray-400 mb-2",children:"Samopoczucie fizyczne"}),e.jsx(c,{rating:t.ratingPhysical})]}),t.ratingEnergy&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm lg:text-base text-gray-600 dark:text-gray-400 mb-2",children:"Poziom energii"}),e.jsx(c,{rating:t.ratingEnergy})]}),t.ratingMotivation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm lg:text-base text-gray-600 dark:text-gray-400 mb-2",children:"Motywacja"}),e.jsx(c,{rating:t.ratingMotivation})]}),t.ratingDifficulty&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm lg:text-base text-gray-600 dark:text-gray-400 mb-2",children:"TrudnoÅ›Ä‡ treningu"}),e.jsx(c,{rating:t.ratingDifficulty})]})]})]}),(t.mostSatisfiedWith||t.improveNextTime||t.howToImprove)&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"font-semibold text-base lg:text-lg text-gray-900 dark:text-gray-100 mb-4",children:"Refleksja po treningu"}),e.jsxs("div",{className:"space-y-4",children:[t.mostSatisfiedWith&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm lg:text-base font-medium text-green-900 dark:text-green-300 mb-2",children:"ðŸ˜Š Z czego jestem najbardziej zadowolony?"}),e.jsx("p",{className:"text-sm lg:text-base text-green-800 dark:text-green-200 whitespace-pre-wrap",children:t.mostSatisfiedWith})]}),t.improveNextTime&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm lg:text-base font-medium text-amber-900 dark:text-amber-300 mb-2",children:"ðŸ“ˆ Co nastÄ™pnym razem chcÄ™ zrobiÄ‡ lepiej?"}),e.jsx("p",{className:"text-sm lg:text-base text-amber-800 dark:text-amber-200 whitespace-pre-wrap",children:t.improveNextTime})]}),t.howToImprove&&e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm lg:text-base font-medium text-purple-900 dark:text-purple-300 mb-2",children:"ðŸ’¡ Jak mogÄ™ to zrobiÄ‡?"}),e.jsx("p",{className:"text-sm lg:text-base text-purple-800 dark:text-purple-200 whitespace-pre-wrap",children:t.howToImprove})]})]})]}),t.notes&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("p",{className:"text-sm lg:text-base font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Dodatkowe uwagi i komentarze"}),e.jsx("p",{className:"text-sm lg:text-base text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:t.notes})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("a",{href:"/trainings",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 text-sm lg:text-base font-medium",children:"â† PowrÃ³t do listy treningÃ³w"})}),e.jsx(v,{isOpen:s,onClose:()=>r(!1),onConfirm:n})]})}export{E as TrainingDetails};
