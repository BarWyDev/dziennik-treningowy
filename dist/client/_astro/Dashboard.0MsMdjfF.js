import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.TcFrwHGi.js";function x(){const t=new Date().getHours();return t<12?"Dzień dobry":t<18?"Cześć":"Dobry wieczór"}function o({userName:t}){const r=x(),a=t.split(" ")[0];return e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl lg:text-3xl xl:text-4xl font-bold text-gray-900 dark:text-gray-100",children:[r,", ",a,"!"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-base lg:text-lg",children:"Sprawdź swoje postępy i zaplanuj kolejny trening."})]})}function c(t){const r=Math.floor(t/60),a=t%60;return r>0?a>0?`${r}h ${a}min`:`${r}h`:`${a}min`}function m({trainingsCount:t,totalDuration:r,totalCalories:a}){return e.jsxs("div",{className:"bg-white dark:bg-[#161b22] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-6",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Ten tydzień"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl lg:text-4xl xl:text-5xl font-bold text-primary-600 dark:text-primary-400",children:t}),e.jsx("p",{className:"text-sm lg:text-base text-gray-500 dark:text-gray-400 mt-1",children:t===1?"trening":t>=2&&t<=4?"treningi":"treningów"})]}),e.jsxs("div",{className:"text-center border-x border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-3xl lg:text-4xl xl:text-5xl font-bold text-primary-600 dark:text-primary-400",children:r>0?c(r):"0min"}),e.jsx("p",{className:"text-sm lg:text-base text-gray-500 dark:text-gray-400 mt-1",children:"łącznie"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl lg:text-4xl xl:text-5xl font-bold text-primary-600 dark:text-primary-400",children:a>0?a:"-"}),e.jsx("p",{className:"text-sm lg:text-base text-gray-500 dark:text-gray-400 mt-1",children:"kcal"})]})]})]})}function g(t){const r=new Date(t),a=new Date,s=new Date(a);return s.setDate(s.getDate()-1),t===a.toISOString().split("T")[0]?"Dzisiaj":t===s.toISOString().split("T")[0]?"Wczoraj":r.toLocaleDateString("pl-PL",{day:"numeric",month:"short"})}function h(t){const r=Math.floor(t/60),a=t%60;return r>0?a>0?`${r}h ${a}min`:`${r}h`:`${a}min`}function y({trainings:t}){return t.length===0?e.jsxs("div",{className:"bg-white dark:bg-[#161b22] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-6",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Ostatnie treningi"}),e.jsxs("div",{className:"text-center py-6",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 lg:h-14 lg:w-14 text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"mt-2 text-sm lg:text-base text-gray-500 dark:text-gray-400",children:"Brak treningów do wyświetlenia"}),e.jsx("a",{href:"/trainings/new",className:"mt-3 inline-block text-sm lg:text-base text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",children:"Dodaj pierwszy trening"})]})]}):e.jsxs("div",{className:"bg-white dark:bg-[#161b22] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Ostatnie treningi"}),e.jsx("a",{href:"/trainings",className:"text-sm lg:text-base text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",children:"Zobacz wszystkie"})]}),e.jsx("div",{className:"space-y-3",children:t.map(r=>e.jsxs("a",{href:`/trainings/${r.id}`,className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 text-base lg:text-lg",children:r.trainingType?.name||"Trening"}),e.jsx("p",{className:"text-sm lg:text-base text-gray-500 dark:text-gray-400",children:g(r.date)})]}),e.jsx("span",{className:"text-sm lg:text-base font-medium text-primary-600 dark:text-primary-400",children:h(r.durationMinutes)})]},r.id))})]})}function u(t,r){return!r||r===0?0:Math.min(100,Math.round((t||0)/r*100))}function p({goals:t}){return t.length===0?e.jsxs("div",{className:"bg-white dark:bg-[#161b22] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-6",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Aktywne cele"}),e.jsxs("div",{className:"text-center py-6",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 lg:h-14 lg:w-14 text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),e.jsx("p",{className:"mt-2 text-sm lg:text-base text-gray-500 dark:text-gray-400",children:"Brak aktywnych celów"}),e.jsx("a",{href:"/goals",className:"mt-3 inline-block text-sm lg:text-base text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",children:"Dodaj pierwszy cel"})]})]}):e.jsxs("div",{className:"bg-white dark:bg-[#161b22] rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Aktywne cele"}),e.jsx("a",{href:"/goals",className:"text-sm lg:text-base text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",children:"Zarządzaj"})]}),e.jsx("div",{className:"space-y-4",children:t.map(r=>{const a=u(r.currentValue,r.targetValue),s=r.targetValue&&r.targetValue>0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 text-base lg:text-lg",children:r.title}),s&&e.jsxs("span",{className:"text-sm lg:text-base text-gray-500 dark:text-gray-400",children:[r.currentValue||0,"/",r.targetValue," ",r.unit]})]}),s&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 dark:bg-primary-500 h-2 rounded-full transition-all",style:{width:`${a}%`}})})]},r.id)})})]})}function b(){return e.jsx("a",{href:"/trainings/new",className:"block bg-gradient-to-r from-primary-600 to-primary-700 dark:from-primary-500 dark:to-primary-600 rounded-xl shadow-sm p-6 text-white hover:from-primary-700 hover:to-primary-800 dark:hover:from-primary-600 dark:hover:to-primary-700 transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/20 dark:bg-white/10 rounded-lg p-3",children:e.jsx("svg",{className:"w-6 h-6 lg:w-7 lg:h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-lg lg:text-xl",children:"Dodaj trening"}),e.jsx("p",{className:"text-primary-100 dark:text-primary-200 text-sm lg:text-base",children:"Zapisz swój dzisiejszy trening"})]})]})})}function N({userName:t}){const[r,a]=i.useState(null),[s,n]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const l=await fetch("/api/dashboard");if(l.ok){const d=await l.json();a(d)}}catch{console.error("Error fetching dashboard data")}finally{n(!1)}})()},[]),s?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"h-40 bg-gray-200 dark:bg-gray-800 rounded-xl animate-pulse"}),e.jsx("div",{className:"lg:col-span-2 h-40 bg-gray-200 dark:bg-gray-800 rounded-xl animate-pulse"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-800 rounded-xl animate-pulse"}),e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-800 rounded-xl animate-pulse"})]})]}):r?e.jsxs("div",{className:"space-y-6",children:[e.jsx(o,{userName:t}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(b,{}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(m,{trainingsCount:r.weekSummary.trainingsCount,totalDuration:r.weekSummary.totalDuration,totalCalories:r.weekSummary.totalCalories})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(y,{trainings:r.recentTrainings}),e.jsx(p,{goals:r.activeGoals})]})]}):e.jsx("div",{className:"text-gray-900 dark:text-gray-100",children:"Nie udało się załadować danych"})}export{N as Dashboard};
