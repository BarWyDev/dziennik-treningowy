import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as m}from"./index.TcFrwHGi.js";import{u as y,a as w,L as a}from"./Label.CntfKGud.js";import{a as f}from"./auth-client.BQaCGZiS.js";import{r as g}from"./auth.aDAqnXXl.js";import{B as k}from"./Button.DG6KPLDP.js";import{I as t}from"./Input.hTVRzoe8.js";import{A as c}from"./Alert.D-DBx2Lh.js";function C(){const[l,o]=m.useState(null),[p,x]=m.useState(!1),[u,n]=m.useState(!1),{register:r,handleSubmit:j,formState:{errors:s}}=y({resolver:w(g)}),h=async i=>{n(!0),o(null);try{const d=await f.email({email:i.email,password:i.password,name:i.name});if(d.error){o(d.error.message||"Wystąpił błąd podczas rejestracji");return}x(!0)}catch{o("Wystąpił błąd podczas rejestracji")}finally{n(!1)}};return p?e.jsxs("div",{className:"text-center",children:[e.jsx(c,{variant:"success",title:"Rejestracja zakończona!",children:e.jsx("p",{children:"Na Twój adres email został wysłany link aktywacyjny. Sprawdź swoją skrzynkę pocztową i kliknij w link, aby aktywować konto."})}),e.jsx("p",{className:"mt-6 text-sm lg:text-base text-gray-600 dark:text-gray-400",children:e.jsx("a",{href:"/auth/login",className:"text-primary-600 dark:text-primary-400 hover:text-primary-500 dark:hover:text-primary-300 font-medium",children:"Wróć do strony logowania"})})]}):e.jsxs("form",{onSubmit:j(h),className:"space-y-6",children:[l&&e.jsx(c,{variant:"error",children:l}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"name",required:!0,children:"Imię"}),e.jsx(t,{id:"name",type:"text",autoComplete:"name",placeholder:"Jan",error:s.name?.message,...r("name")})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"email",required:!0,children:"Email"}),e.jsx(t,{id:"email",type:"email",autoComplete:"email",placeholder:"jan@example.com",error:s.email?.message,...r("email")})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"password",required:!0,children:"Hasło"}),e.jsx(t,{id:"password",type:"password",autoComplete:"new-password",placeholder:"••••••••",error:s.password?.message,...r("password")}),e.jsx("p",{className:"mt-1 text-xs lg:text-sm text-gray-500 dark:text-gray-400",children:"Min. 8 znaków, wielka i mała litera oraz cyfra"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"confirmPassword",required:!0,children:"Potwierdź hasło"}),e.jsx(t,{id:"confirmPassword",type:"password",autoComplete:"new-password",placeholder:"••••••••",error:s.confirmPassword?.message,...r("confirmPassword")})]}),e.jsx(k,{type:"submit",className:"w-full",isLoading:u,children:"Zarejestruj się"}),e.jsxs("p",{className:"text-center text-sm lg:text-base text-gray-600 dark:text-gray-400",children:["Masz już konto?"," ",e.jsx("a",{href:"/auth/login",className:"text-primary-600 dark:text-primary-400 hover:text-primary-500 dark:hover:text-primary-300 font-medium",children:"Zaloguj się"})]})]})}export{C as RegisterForm};
