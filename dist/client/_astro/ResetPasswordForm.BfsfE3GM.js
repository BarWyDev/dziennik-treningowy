import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{r as e}from"./index.TcFrwHGi.js";import{u as j,a as y,L as d}from"./Label.CntfKGud.js";import{r as g}from"./auth-client.BQaCGZiS.js";import{a as z}from"./auth.aDAqnXXl.js";import{B as b}from"./Button.DG6KPLDP.js";import{I as c}from"./Input.hTVRzoe8.js";import{A as a}from"./Alert.D-DBx2Lh.js";function I({token:o}){const[t,s]=e.useState(null),[p,w]=e.useState(!1),[u,i]=e.useState(!1),{register:n,handleSubmit:h,formState:{errors:l}}=j({resolver:y(z)}),f=async x=>{i(!0),s(null);try{const m=await g({newPassword:x.password,token:o});if(m.error){s(m.error.message||"Wystąpił błąd podczas resetowania hasła");return}w(!0)}catch{s("Wystąpił błąd podczas resetowania hasła")}finally{i(!1)}};return o?p?r.jsxs("div",{className:"text-center",children:[r.jsx(a,{variant:"success",title:"Hasło zmienione!",children:r.jsx("p",{children:"Twoje hasło zostało pomyślnie zmienione. Możesz się teraz zalogować."})}),r.jsx("a",{href:"/auth/login",className:"mt-6 inline-block text-primary-600 hover:text-primary-500 font-medium",children:"Przejdź do logowania"})]}):r.jsxs("form",{onSubmit:h(f),className:"space-y-6",children:[t&&r.jsx(a,{variant:"error",children:t}),r.jsxs("div",{children:[r.jsx(d,{htmlFor:"password",required:!0,children:"Nowe hasło"}),r.jsx(c,{id:"password",type:"password",autoComplete:"new-password",placeholder:"••••••••",error:l.password?.message,...n("password")}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Min. 8 znaków, wielka i mała litera oraz cyfra"})]}),r.jsxs("div",{children:[r.jsx(d,{htmlFor:"confirmPassword",required:!0,children:"Potwierdź nowe hasło"}),r.jsx(c,{id:"confirmPassword",type:"password",autoComplete:"new-password",placeholder:"••••••••",error:l.confirmPassword?.message,...n("confirmPassword")})]}),r.jsx(b,{type:"submit",className:"w-full",isLoading:u,children:"Zmień hasło"})]}):r.jsxs(a,{variant:"error",title:"Nieprawidłowy link",children:[r.jsx("p",{children:"Link do resetowania hasła jest nieprawidłowy lub wygasł. Spróbuj ponownie zresetować hasło."}),r.jsx("a",{href:"/auth/forgot-password",className:"mt-4 inline-block text-primary-600 hover:text-primary-500 font-medium",children:"Zresetuj hasło ponownie"})]})}export{I as ResetPasswordForm};
